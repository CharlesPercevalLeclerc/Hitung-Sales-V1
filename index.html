<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Laporan Sales Harian</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<style>
:root{
  --bg:#f3f4f6;
  --card:#ffffff;
  --text:#111827;
  --border:#d1d5db;
  --btn:#2563eb;
}
body.dark{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#e5e7eb;
  --border:#334155;
  --btn:#38bdf8;
}
body{
  background:var(--bg);
  color:var(--text);
  font-family:Arial, sans-serif;
  padding:16px;
}
h2{margin:10px 0}
.card{
  background:var(--card);
  padding:16px;
  border-radius:10px;
  margin-bottom:16px;
  box-shadow:0 2px 6px rgba(0,0,0,.15);
}
input, textarea{
  width:100%;
  padding:10px;
  font-size:16px;
  border-radius:6px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
  margin-top:8px;
}
button{
  width:100%;
  padding:12px;
  margin-top:12px;
  font-size:16px;
  border:none;
  border-radius:8px;
  background:var(--btn);
  color:#fff;
}
textarea{height:330px}

.copyright{
  text-align:center;
  font-size:12px;
  margin-top:20px;
  opacity:.6;
}
</style>
</head>

<body>

<button onclick="toggleDark()">🌙 / ☀️ Dark Mode</button>

<h2>Hitung Laporan Sales Harian</h2>

<div class="card">
  <input placeholder="Nama Toko" id="toko">

  <input placeholder="Sales Shift 1" inputmode="numeric" oninput="formatAngka(this)" id="sls1">
  <input placeholder="Sales Shift 2" inputmode="numeric" oninput="formatAngka(this)" id="sls2">

  <input placeholder="Struk Shift 1" inputmode="numeric" oninput="formatAngka(this)" id="stk1">
  <input placeholder="Struk Shift 2" inputmode="numeric" oninput="formatAngka(this)" id="stk2">

  <input placeholder="AKM Sales Kemarin" inputmode="numeric" oninput="formatAngka(this)" id="akmSalesKemarin">
  <input placeholder="AKM Struk Kemarin" inputmode="numeric" oninput="formatAngka(this)" id="akmStrukKemarin">

  <input placeholder="Target SPD" inputmode="numeric" oninput="formatAngka(this)" id="targetSpd">
  <input placeholder="SPD Lalu" inputmode="numeric" oninput="formatAngka(this)" id="spdLalu">
  <input placeholder="STD Lalu" inputmode="numeric" oninput="formatAngka(this)" id="stdLalu">
  <input placeholder="APC Lalu" inputmode="numeric" oninput="formatAngka(this)" id="apcLalu">

  <button onclick="hitung()">Generate Laporan</button>
</div>

<div class="card">
  <button onclick="copyText()">📋 Copy Laporan</button>
  <textarea id="output" readonly></textarea>
</div>

<footer class="copyright">
  © tripplesix
</footer>

<script>
/* DARK MODE */
if(localStorage.dark==="1") document.body.classList.add("dark");
function toggleDark(){
  document.body.classList.toggle("dark");
  localStorage.dark = document.body.classList.contains("dark") ? "1" : "0";
}

/* UTIL */
function bersih(v){ return parseInt(v.replace(/\./g,'')) || 0 }
function rupiah(n){ return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".") }
function formatAngka(el){
  el.value = rupiah(bersih(el.value).toString())
}
function tanggal(){
  const d=new Date();
  return String(d.getDate()).padStart(2,'0')+"-"+String(d.getMonth()+1).padStart(2,'0')+"-"+d.getFullYear();
}
function growth(n,l){
  if(!l) return "0%";
  let g=Math.round((n/l*100)-100);
  return (g>=0?"+":"")+g+"%";
}

/* MAIN */
function hitung(){
  const slsNet = bersih(sls1.value) + bersih(sls2.value);
  const struk = bersih(stk1.value) + bersih(stk2.value);
  const apc = struk ? Math.round(slsNet/struk) : 0;

  const akmSales = slsNet + bersih(akmSalesKemarin.value);
  const akmStruk = struk + bersih(akmStrukKemarin.value);

  const hari = new Date().getDate();
  const spdNow = Math.round(akmSales/hari);
  const stdNow = Math.round(akmStruk/hari);
  const apcNow = stdNow ? Math.round(spdNow/stdNow) : 0;

  const ach = bersih(targetSpd.value)
    ? Math.round(spdNow/bersih(targetSpd.value)*100)
    : 0;

output.value =
`*LAPORAN HARIAN*
*Toko : ${toko.value}*
*Tgl : ${tanggal()}*

*Sls Net :* ${rupiah(slsNet)}
*Struk :* ${rupiah(struk)}
*Apc :* ${rupiah(apc)}

*AKM Sales :* ${rupiah(akmSales)}
*Target SPD :* ${rupiah(bersih(targetSpd.value))}
*Ach :* ${ach}%

*SPD Sekarang :* ${rupiah(spdNow)}
*SPD Lalu :* ${rupiah(bersih(spdLalu.value))}
*Growth :* ${growth(spdNow,bersih(spdLalu.value))}

*STD Sekarang :* ${rupiah(stdNow)}
*STD Lalu :* ${rupiah(bersih(stdLalu.value))}
*Growth :* ${growth(stdNow,bersih(stdLalu.value))}

*APC Sekarang :* ${rupiah(apcNow)}
*APC Lalu :* ${rupiah(bersih(apcLalu.value))}
*Growth :* ${growth(apcNow,bersih(apcLalu.value))}

*Target tarik tunai perday :* 9
*Akm tarik tunai :*
*SPD tarik tunai :*

*Target new member I-SAKU :*
*Pencapaian :* 0
*Target new member point ku :*
*Pencapaian :* 0
*Target new member klik :*
*Pencapaian :* 0`;
}

function copyText(){
  output.select();
  document.execCommand("copy");
  alert("Laporan dicopy!");
}
</script>

</body>
</html>

